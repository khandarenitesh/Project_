<section style="background-color: #eee;">
  <div class="container py-5">
    <div class="row">
      <div class="col-lg-12">
        <div class="card mb-4">
          <div class="card-body">
            <form class="vForm" [formGroup]="changepasswordForm" (ngSubmit)="SavechangePass()">
              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width">
                    <mat-label> Employee No. </mat-label>
                    <input matInput type="text" placeholder="Employee Id" name="EmployeeId"
                      formControlName="EmployeeId" />
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field class="example-full-width">
                    <mat-label>Employee Name</mat-label>
                    <input matInput type="text" placeholder="Employee Name" name="EmployeeName"
                      formControlName="EmployeeName" />
                  </mat-form-field>
                </div>
                <div class="col"></div>
              </div> &nbsp;&nbsp;&nbsp;&nbsp;
              <div class="row">
                <div class="col">
                  <mat-form-field class="example-full-width">
                    <mat-label> Password <span style="color: red;"> * </span></mat-label>
                    <input matInput type="password" placeholder="Password" name="oldPassword"
                      formControlName="oldPassword" [ngClass]="{
                      'is-invalid': changepasswordForm.controls['oldPassword'].invalid,
                      'is-valid': changepasswordForm.controls['oldPassword'].valid
                    }">
                  </mat-form-field>

                  <!-- <mat-error *ngIf="submitted === false && f.oldPassword.touched && f.oldPassword.invalid"
                    class="invalid-feedback">
                    old Password is required
                  </mat-error> -->

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                      validation: 'minlength',
                      message: 'Password should have at least 8 symbols',
                      control: changepasswordForm.controls['oldPassword']
                    }"></ng-container>

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                      validation: 'maxLength',
                      message: 'Password should have maximum 100 symbols',
                      control: changepasswordForm.controls['oldPassword']
                    }"></ng-container>
                </div>

                <div class="col">
                  <mat-form-field class="example-full-width">
                    <mat-label> New Password <span style="color: red;"> * </span></mat-label>
                    <input matInput type="password" placeholder="New Password" name="npassword"
                      formControlName="npassword" [ngClass]="{
                      'is-invalid':changepasswordForm.controls['npassword'].invalid,
                      'is-valid': changepasswordForm.controls['npassword'].valid
                    }">
                  </mat-form-field>

                  <!-- <mat-error *ngIf="submitted === false && f.npassword.touched && f.npassword.invalid"
                    class="invalid-feedback">
                    New Password is required
                  </mat-error> -->

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                    validation: 'minlength',
                    message: 'Password should have at least 8 symbols',
                    control: changepasswordForm.controls['npassword']
                  }"></ng-container>

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                    validation: 'maxLength',
                    message: 'Password should have maximum 100 symbols',
                    control: changepasswordForm.controls['npassword']
                  }"></ng-container>
                </div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col">
                  <mat-form-field class="example-full-width">
                    <mat-label> Confirm Password <span style="color: red;"> * </span></mat-label>
                    <input matInput type="password" placeholder="Confirm Password" name="cnfmPassword"
                      formControlName="cnfmPassword" [ngClass]="{
                        'is-invalid': changepasswordForm.controls['cnfmPassword'].invalid,
                        'is-valid': changepasswordForm.controls['cnfmPassword'].valid
                      }">
                  </mat-form-field>

                  <!-- <mat-error *ngIf="submitted === false && f.cnfmPassword.touched && f.cnfmPassword.invalid"
                    class="invalid-feedback">
                    Confirm Password is required
                  </mat-error> -->

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                    validation: 'minlength',
                    message: 'Password should have at least 8 symbols',
                    control: changepasswordForm.controls['cnfmPassword']
                  }"></ng-container>

                  <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                    validation: 'maxLength',
                    message: 'Password should have maximum 100 symbols',
                    control: changepasswordForm.controls['cnfmPassword']
                  }"></ng-container>

                  <ng-container *ngIf="changepasswordForm.controls['cnfmPassword'].errors &&
                  changepasswordForm.controls['cnfmPassword'].errors.ConfirmPassword
                  ">
                    <div class="fv-plugins-message-container">
                      <div class="fv-help-block">
                        'Passsword' and 'Confirm Password' didn't match.
                      </div>
                    </div>
                  </ng-container>
                </div>
              </div> &nbsp;&nbsp;&nbsp;&nbsp;
              <div class="row">
                <div class="col"></div>
                <div class="col"></div>
                <div class="col">
                  <button mat-raised-button class="cancel-buttton m-3" type="button" (click)="ClearForm()"> cancel
                  </button>
                  <button mat-raised-button color="primary" type="submit"> {{ pageState }}
                  </button>
                </div>
              </div>
            </form>
            <ng-template #formError let-control="control" let-message="message" let-validation="validation">
              <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
                <div class="fv-plugins-message-container">
                  <span role="alert">
                    {{ message }}
                  </span>
                </div>
              </ng-container>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
